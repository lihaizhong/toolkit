<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for tools/countdown/CountDown.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../index.html">all files</a> / <a href="index.html">tools/countdown/</a> CountDown.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">62.22% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>28/45</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">30.77% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>8/26</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">66.67% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>8/12</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">71.05% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>27/38</span>
      </div>
    </div>
  </div>
  <div class='status-line medium'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112</td><td class="line-coverage quiet"><span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		<span class="missing-if-branch" title="if path not taken" >I</span>if(installedModules[moduleId]) {
/******/ 			<span class="cstat-no" title="statement not covered" >return installedModules[moduleId].exports;</span>
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		<span class="missing-if-branch" title="else path not taken" >E</span>if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		<span class="missing-if-branch" title="else path not taken" >E</span>if(typeof Symbol !== 'undefined' &amp;&amp; Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode &amp; 1: value is a module id, require it
/******/ 	// mode &amp; 2: merge all properties of value into the ns
/******/ 	// mode &amp; 4: return value when already ns object
/******/ 	// mode &amp; 8|1: behave like require
/******/ 	__webpack_require__.t = <span class="fstat-no" title="function not covered" >function(value, mode) {</span>
/******/ 		<span class="cstat-no" title="statement not covered" >if(mode &amp; 1) <span class="cstat-no" title="statement not covered" >value = __webpack_require__(value);</span></span>
/******/ 		<span class="cstat-no" title="statement not covered" >if(mode &amp; 8) <span class="cstat-no" title="statement not covered" >return value;</span></span>
/******/ 		<span class="cstat-no" title="statement not covered" >if((mode &amp; 4) &amp;&amp; typeof value === 'object' &amp;&amp; value &amp;&amp; value.__esModule) <span class="cstat-no" title="statement not covered" >return value;</span></span>
/******/ 		<span class="cstat-no" title="statement not covered" >var ns = Object.create(null);</span>
/******/ 		<span class="cstat-no" title="statement not covered" >__webpack_require__.r(ns);</span>
/******/ 		<span class="cstat-no" title="statement not covered" >Object.defineProperty(ns, 'default', { enumerable: true, value: value });</span>
/******/ 		<span class="cstat-no" title="statement not covered" >if(mode &amp; 2 &amp;&amp; typeof value != 'string') <span class="cstat-no" title="statement not covered" >for(var key in value) <span class="cstat-no" title="statement not covered" >__webpack_require__.d(ns, key, <span class="fstat-no" title="function not covered" >function(key) {</span> <span class="cstat-no" title="statement not covered" >return value[key]; </span>}.bind(null, key));</span></span></span>
/******/ 		<span class="cstat-no" title="statement not covered" >return ns;</span>
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module &amp;&amp; module.__esModule ?
/******/ 			<span class="fstat-no" title="function not covered" ><span class="branch-0 cbranch-no" title="branch not covered" >function getDefault() {</span> <span class="cstat-no" title="statement not covered" >return module['default']; </span>} </span>:
/******/ 			<span class="fstat-no" title="function not covered" >function getModuleExports() {</span> <span class="cstat-no" title="statement not covered" >return module; </span>};
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/var/folders/m3/cm2m6_9n1_bcq5px23bjyldm0000gn/T/_karma_webpack_/";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./tools/countdown/CountDown.js");
/******/ })
/************************************************************************/
/******/ ({
&nbsp;
/***/ "./tools/countdown/CountDown.js":
/*!**************************************!*\
  !*** ./tools/countdown/CountDown.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {
&nbsp;
"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CountDown; });\n/* harmony import */ var _requestAnimationFrame__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./requestAnimationFrame */ \"./tools/countdown/requestAnimationFrame.js\");\n/* harmony import */ var _requestAnimationFrame__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_requestAnimationFrame__WEBPACK_IMPORTED_MODULE_0__);\n/**\n * @author Sangbaipi\n * @email sangbaipi@2dfire.com\n * @create date 2018-08-27 02:45:53\n * @modify date 2018-08-27 02:45:53\n * @desc 倒计时 内部以 “毫秒” 为单位，对外抛出以 “秒” 为单位\n * @param {Boolean} needRemainFormat 非不填，是否需要格式化时间 默认是 true\n * @param {Date | String} startTime 非必填，开始时间 用于计算remain时间 默认是 Date.now()\n * @param {Date | String} endTime 非必填，结束时间 用于计算remain时间 默认是 Date.now()\n * @param {Number} remain 推荐，否则可以通过startTime和endTime计算出来\n * @param {Function} callback 倒计时的回调函数，有一个参数`remainTimeVos`和一个是否结束的参数`isFinished`\n * @key {Object} remainTimeVos\n * @sub-key {String} day 剩余天数\n * @sub-key {String} hours 剩余小时\n * @sub-key {String} minutes 剩余分钟\n * @sub-key {String} seconds 剩余秒\n * @sub-key {Number} remain 剩余时间（单位：秒）\n * @key {Function} includeSymbol 用于判断当前的symbol是否存在于symbol集合中\n *\n * 注：symbol的编写规则[type]:[value]![ET][expires]\n * 1. type表示value的类型（可以填写time表示具体时间，也可以填写remain表示剩余时间触发）\n * 2. 用:隔开，填写value的值\n * 3. 用!隔开，后面选填，如果不填，表示Infinity，剩余时间都会触发该symbol\n * 4. ET表示expires的类型（可以填写T表示具体时间，也可以填写R表示剩余时间，默认不填为R）\n * 5. expires表示生命周期\n*/\n\nclass CountDown {\n  constructor(needRemainFormat) {\n    this.init(needRemainFormat);\n  }\n  /* ##################### External methods ######################### */\n\n  /**\n   * @exports init\n   *\n   * 初始化\n   * @param {boolean} needRemainFormat\n   */\n\n\n  init(needRemainFormat) {\n    this._needRemainFormat = needRemainFormat !== false;\n    this._nowTime = this._startTime = this._endTime = null;\n    this._timer = null;\n    this._remain = 0;\n    this._breakpoint = {};\n\n    this._callback = function () {};\n  }\n  /**\n   * @exports setRemainTime\n   *\n   * 设置剩余时间\n   * @param {number} remain\n   */\n\n\n  setRemainTime(remain) {\n    if (remain &lt; 0) {\n      remain = 0;\n    }\n\n    this._remain = typeof remain !== 'number' ? 0 : CountDown.setTimeFormat(remain);\n    this.exit();\n    return this;\n  }\n  /**\n   * @exports setTime\n   *\n   * 设置开始时间和结束时间\n   * @param {date | number | string} startTime\n   * @param {date | number | string} endTime\n   * @param {date | number | string} nowTime\n   */\n\n\n  setTime(startTime, endTime, nowTime) {\n    this._startTime = CountDown.setTimeFormat(startTime);\n    this._endTime = CountDown.setTimeFormat(endTime);\n    this._nowTime = CountDown.setTimeFormat(nowTime);\n    let remainTime = this._endTime - Math.max(this._startTime, this._nowTime);\n    this.setRemainTime(remainTime &gt; 0 ? remainTime : 0);\n    return this;\n  }\n  /**\n   * @exports setCallback\n   *\n   * 设置毁掉函数\n   * @param {function} callback\n   */\n\n\n  setCallback(callback) {\n    this._callback = callback;\n    this.exit();\n    return this;\n  }\n  /**\n   * @exports registerSymbol\n   *\n   * 注册断点Symbol\n   * @param {string} point\n   */\n\n\n  registerSymbol(point) {\n    return this._registerSymbol(point);\n  }\n  /**\n   * @exports registerFinishedSymbol\n   *\n   * 注册断点Symbol\n   */\n\n\n  registerFinishedSymbol() {\n    return this._registerSymbol('finished');\n  }\n  /**\n   * @exports registerUnstartSymbol\n   *\n   * 注册断点Symbol\n   */\n\n\n  registerUnstartSymbol() {\n    return this._registerSymbol('unstart');\n  }\n  /**\n   * @exports start\n   *\n   * 启动计时器\n   */\n\n\n  start() {\n    let isFinished = this._remain &lt;= 0;\n\n    let symbols = this._getBreakPointSymbols(isFinished); // 执行回调函数\n\n\n    this._callback(this._getRemainTimeFormat(this._remain), CountDown.includeSymbol(symbols));\n\n    if (!isFinished) {\n      this.play();\n    }\n  }\n  /**\n   * @exports play\n   *\n   * 重启计时器\n   */\n\n\n  play() {\n    let timerStart = Date.now();\n\n    if (this._startTime &amp;&amp; this._startTime &gt; this._nowTime) {\n      return;\n    }\n\n    function __callback__() {\n      let timerEnd = Date.now();\n      let interval = parseInt((timerEnd - timerStart) / 1000) * 1000;\n      let base = 1000;\n      let remain = this._remain;\n      let isFinished = false;\n\n      if (interval &gt;= base) {\n        // 确保时间是绝对精确的\n        timerStart = parseInt(timerEnd / base) * base + timerStart % base; // 由于requestAnimationFrame在离开页面后会出现暂停的效果，顾返回页面时，要减去中间的差值\n\n        remain -= interval; // 更新当前时间\n\n        this._nowTime += interval; // BUGFIX 由于离开页面时间太久，已经过了剩余时间，导致展示内容是负值\n\n        if (remain &lt; 0) {\n          remain = 0;\n        }\n\n        if (remain &lt;= 0) {\n          isFinished = true;\n        }\n\n        this._remain = remain; // 格式化剩余时间\n\n        let remainFormat = this._getRemainTimeFormat(remain); // 执行断点毁掉函数\n\n\n        let symbols = this._getBreakPointSymbols(isFinished); // 执行回调函数\n\n\n        this._callback(remainFormat, CountDown.includeSymbol(symbols));\n      }\n\n      if (!isFinished) {\n        this._timer = requestAnimationFrame(__callback__.bind(this));\n      }\n    }\n\n    this._timer = requestAnimationFrame(__callback__.bind(this));\n  }\n  /**\n   * @exports pause\n   *\n   * 暂停计时器\n   */\n\n\n  pause() {\n    cancelAnimationFrame(this._timer);\n    this._timer = null;\n  }\n  /**\n   * @exports exit\n   *\n   * 关闭计时器\n   */\n\n\n  exit() {\n    this.pause();\n  }\n  /* ##################### Internal methods ######################### */\n\n  /**\n   * 注册断点Symbol\n   * @param {string} point\n   */\n\n\n  _registerSymbol(point) {\n    if (typeof point !== 'string') {\n      console.error('【CountDown】Symbol必须是字符串！');\n      return false;\n    }\n\n    if (this._breakpoint[point]) {\n      console.warn('【CountDown】Symbol已存在！');\n      return this._breakpoint[point];\n    }\n\n    let breakpoint = this._breakpoint[point] = {};\n    let match = null;\n\n    switch (point) {\n      case 'unstart':\n        match = ['unstart', 'unstart', null];\n        break;\n\n      case 'finished':\n        match = ['finished', 'finished', null];\n        break;\n\n      default:\n        match = point.match(/^\\s*(\\w+):(.+?)(?:(!)(.*))?\\s*$/);\n    }\n\n    if (match) {\n      let type = breakpoint['type'] = match[1];\n      let s = match[3];\n      let expires = match[4];\n\n      if (type === 'remain') {\n        breakpoint['value'] = Number(match[2]);\n      } else if (type === 'time') {\n        breakpoint['value'] = CountDown.setTimeFormat(match[2]);\n      } else {\n        breakpoint['value'] = null;\n      }\n\n      if (s === '!') {\n        if (expires) {\n          if (expires.substring(0, 1) === 'T') {\n            expires = CountDown.setTimeFormat(expires.substring(1));\n            breakpoint['ET'] = 'T';\n          } else {\n            if (expires.substring(0, 1) === 'R') {\n              expires = expires.substring(1);\n            }\n\n            expires = CountDown.setTimeFormat(expires);\n            breakpoint['ET'] = 'R';\n          }\n\n          breakpoint['expires'] = expires;\n        } else {\n          breakpoint['expires'] = Infinity;\n        }\n      }\n    } else {\n      console.error('【CountDown】错误的断点类型！');\n    }\n\n    let symbol = `CD${Date.now()}R${parseInt(Math.random() * 1000)}P${point}`;\n    breakpoint['symbol'] = symbol;\n    return symbol;\n  }\n  /**\n   * 执行断点回调函数\n   * @param {boolean} isFinished\n   */\n\n\n  _getBreakPointSymbols(isFinished) {\n    let remain = this._remain;\n    let symbols = [];\n\n    for (let k in this._breakpoint) {\n      if (this._breakpoint.hasOwnProperty(k)) {\n        let breakpoint = this._breakpoint[k];\n        let trigger = false;\n        let type = breakpoint['type'];\n        let value = breakpoint['value'];\n\n        switch (type) {\n          case 'remain':\n            // 防止页面重新展示时，时间已过，无法触发过期断点问题\n            trigger = remain &lt;= value;\n            break;\n\n          case 'time':\n            if (!this._endTime) {\n              console.error('【CountDown】请设置开始时间和结束时间！');\n              continue;\n            }\n\n            let time = CountDown.setTimeFormat(value);\n            let nowTime = this._endTime - remain; // 防止页面重新展示时，时间已过，无法触发过期断点问题\n\n            trigger = nowTime &gt;= time;\n            break;\n\n          case 'unstart':\n            if (!this._startTime) {\n              console.error('【CountDown】请设置开始时间和结束时间！');\n              continue;\n            }\n\n            trigger = this._startTime &amp;&amp; this._nowTime &lt; this._startTime;\n            break;\n\n          case 'finished':\n            trigger = isFinished;\n            break;\n\n          default:\n            console.error('【CountDown】未知断点标识！');\n        } // 达到触发条件，做执行回调函数操作\n\n\n        if (trigger) {\n          let symbol = breakpoint['symbol'];\n          let expires = breakpoint['expires'];\n          let ET = breakpoint['ET'];\n\n          if (isFinite(expires)) {\n            if ('T' === ET) {\n              if (!this._nowTime) {\n                console.error('【CountDown】请设置开始时间和结束时间！');\n                continue;\n              }\n\n              if (expires &gt;= this._nowTime) {\n                delete this._breakpoint[k];\n              }\n            } else if ('R' === ET &amp;&amp; remain &lt;= expires) {\n              delete this._breakpoint[k];\n            }\n          }\n\n          symbols.push(symbol);\n        }\n      }\n    }\n\n    return symbols;\n  }\n  /**\n   * 获取格式化后的剩余时间对象\n   * @param {number} remain\n   */\n\n\n  _getRemainTimeFormat(remain) {\n    if (!this._needRemainFormat) {\n      return remain / 1000;\n    }\n\n    let remainFormat = {};\n    remainFormat.remain = remain / 1000;\n    let dayFormat = 86400000;\n    remainFormat.day = CountDown.formatTime(parseInt(remain / dayFormat));\n    remain = remain % dayFormat;\n    let hoursFormat = 3600000;\n    remainFormat.hours = CountDown.formatTime(parseInt(remain / hoursFormat));\n    remain = remain % hoursFormat;\n    let minutesFormat = 60000;\n    remainFormat.minutes = CountDown.formatTime(parseInt(remain / minutesFormat));\n    remain = remain % minutesFormat;\n    let secondsFormat = 1000;\n    remainFormat.seconds = CountDown.formatTime(parseInt(remain / secondsFormat));\n    return remainFormat;\n  }\n\n}\n/**\n * STATIC: 主要用于开始时间和结束时间的初始化\n * @param {date | number | string} time\n */\n\nCountDown.setTimeFormat = function (time) {\n  let result = null;\n\n  if (time instanceof Date) {\n    result = time.getTime();\n  } else if (!isNaN(time) &amp;&amp; (typeof time === 'number' || typeof time === 'string')) {\n    result = Number(time);\n  } else if (isNaN(time) &amp;&amp; typeof time === 'string') {\n    // 针对safari浏览器做时间调整\n    if (/safari/gi.test(navigator.userAgent)) {\n      time = time.trim();\n      time = time.replace(/\\s+/, 'T');\n    }\n\n    result = new Date(time).getTime();\n  } else {\n    result = Date.now();\n  }\n\n  return parseInt(result / 1000) * 1000;\n};\n/**\n * STATIC: 格式化时间\n * @param {number} time\n */\n\n\nCountDown.formatTime = function (time) {\n  if (isNaN(time) || time === '' || typeof time === 'boolean') {\n    time = 0;\n  }\n\n  time = '0' + time;\n  return time.substring(time.length - 2);\n};\n/**\n * STATIC: 类似数组的includeOf\n * @param {array} symbols\n */\n\n\nCountDown.includeSymbol = symbols =&gt; symbol =&gt; symbols.indexOf(symbol) !== -1;\n\n//# sourceURL=webpack:///./tools/countdown/CountDown.js?");
&nbsp;
/***/ }),
&nbsp;
/***/ "./tools/countdown/requestAnimationFrame.js":
/*!**************************************************!*\
  !*** ./tools/countdown/requestAnimationFrame.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports) {
&nbsp;
eval("/**\n * @author Sangbaipi\n * @email sangbaipi@2dfire.com\n * @create date 2018-08-27 05:39:18\n * @modify date 2018-08-27 05:39:18\n * @desc RequestAnimationFrame兼容\n*/\nlet lastTime = 0;\nconst vendors = ['webkit', 'moz'];\nlet requestAnimationFrame = window.requestAnimationFrame;\nlet cancelAnimationFrame = window.cancelAnimationFrame;\n\nfor (var i = 0; !requestAnimationFrame &amp;&amp; i &lt; vendors.length; i++) {\n  requestAnimationFrame = window[vendors[i] + 'RequestAnimationFrame']; // Webkit中此取消方法的名字变了\n\n  cancelAnimationFrame = window[vendors[i] + 'CancelAnimationFrame'] || window[vendors[i] + 'CancelRequestAnimationFrame'];\n} // 模拟requestAnimationFrame\n\n\nif (!requestAnimationFrame) {\n  requestAnimationFrame = callback =&gt; {\n    var currTime = new Date().getTime();\n    var timeToCall = Math.max(0, 16.7 - (currTime - lastTime));\n    var id = window.setTimeout(function () {\n      callback();\n    }, timeToCall);\n    lastTime = currTime + timeToCall;\n    return id;\n  };\n} // 模拟cancelAnimationFrame\n\n\nif (!cancelAnimationFrame) {\n  cancelAnimationFrame = id =&gt; {\n    clearTimeout(id);\n  };\n}\n\nwindow.requestAnimationFrame = requestAnimationFrame;\nwindow.cancelAnimationFrame = cancelAnimationFrame;\n\n//# sourceURL=webpack:///./tools/countdown/requestAnimationFrame.js?");
&nbsp;
/***/ })
&nbsp;
/******/ });</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Thu Sep 27 2018 18:08:06 GMT+0800 (CST)
</div>
</div>
<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../sorter.js"></script>
</body>
</html>
